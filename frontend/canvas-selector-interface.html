<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Classes from HTML - Figma Integration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, sans-serif;
            background: #2c2c2c;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        /* –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω –≤–∏–±–æ—Ä—É —Ä–µ–∂–∏–º—É */
        .welcome-screen {
            background: #373737;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .welcome-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .welcome-subtitle {
            color: #9ca3af;
            font-size: 16px;
        }

        .mode-selector {
            background: #2c2c2c;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 30px;
        }

        .mode-selector-title {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 12px;
            padding: 0 8px;
        }

        .mode-option {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            margin-bottom: 2px;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .mode-option:hover {
            background: #3a3a3a;
        }

        .mode-option.selected {
            background: #4a4a4a;
            border-color: #0ea5e9;
        }

        .mode-icon {
            font-size: 24px;
            margin-right: 16px;
            margin-top: 2px;
        }

        .mode-content {
            flex: 1;
        }

        .mode-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-description {
            color: #9ca3af;
            font-size: 14px;
            line-height: 1.4;
        }

        /* Canvas —Å–µ–ª–µ–∫—Ç–æ—Ä */
        .canvas-selector {
            display: none;
            background: #373737;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .canvas-selector.active {
            display: block;
        }

        .canvas-header {
            background: #4a9eff;
            margin: -24px -24px 24px -24px;
            padding: 20px 24px;
            border-radius: 12px 12px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .canvas-title {
            font-size: 18px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .selected-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 14px;
        }

        .canvas-info {
            background: #2c2c2c;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #9ca3af;
        }

        .canvas-list {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 24px;
        }

        .canvas-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #2c2c2c;
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .canvas-item:hover {
            background: #3a3a3a;
        }

        .canvas-item.selected {
            background: #3a3a3a;
        }

        .canvas-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            position: relative;
            display: inline-block;
        }

        .canvas-checkbox input {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: transparent;
            border: 2px solid #6b7280;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .canvas-item input:checked ~ .checkmark {
            background-color: #0ea5e9;
            border-color: #0ea5e9;
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 5px;
            top: 1px;
            width: 6px;
            height: 11px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .canvas-item input:checked ~ .checkmark:after {
            display: block;
        }

        .canvas-name {
            flex: 1;
            font-size: 15px;
        }

        .canvas-count {
            color: #6b7280;
            font-size: 14px;
        }

        .actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .btn {
            padding: 10px 24px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-secondary {
            background: #4a4a4a;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background: #5a5a5a;
        }

        .btn-primary {
            background: #0ea5e9;
            color: #ffffff;
        }

        .btn-primary:hover {
            background: #0284c7;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Scrollbar —Å—Ç–∏–ª—ñ */
        .canvas-list::-webkit-scrollbar {
            width: 8px;
        }

        .canvas-list::-webkit-scrollbar-track {
            background: #2c2c2c;
            border-radius: 4px;
        }

        .canvas-list::-webkit-scrollbar-thumb {
            background: #4a4a4a;
            border-radius: 4px;
        }

        .canvas-list::-webkit-scrollbar-thumb:hover {
            background: #5a5a5a;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω -->
        <div class="welcome-screen" id="welcomeScreen">
            <div class="welcome-header">
                <h1 class="welcome-title">
                    <span>üé®</span> –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ CSS Classes from HTML!
                </h1>
            </div>

            <div class="mode-selector">
                <div class="mode-selector-title">–í–∏–±–µ—Ä—ñ—Ç—å –ø–æ—á–∞—Ç–∫–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CSS Classes from HTML</div>
                
                <div class="mode-option" data-mode="minimal" onclick="selectMode('minimal')">
                    <div class="mode-icon">‚ö°</div>
                    <div class="mode-content">
                        <div class="mode-title">
                            –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ
                            <span style="color: #9ca3af; font-size: 12px;">–ï–∫—Å–ø–æ—Ä—Ç –∫–ª–∞—Å—ñ–≤ –∑ –ø—É—Å—Ç–∏–º–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º–∏</span>
                        </div>
                        <div class="mode-description">–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å</div>
                    </div>
                </div>

                <div class="mode-option" data-mode="standard" onclick="selectMode('standard')">
                    <div class="mode-icon">‚öôÔ∏è</div>
                    <div class="mode-content">
                        <div class="mode-title">
                            –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ
                            <span style="color: #9ca3af; font-size: 12px;">–í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ Figma —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó</span>
                        </div>
                        <div class="mode-description">–ü–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏</div>
                    </div>
                </div>

                <div class="mode-option" data-mode="maximum" onclick="selectMode('maximum')">
                    <div class="mode-icon">üöÄ</div>
                    <div class="mode-content">
                        <div class="mode-title">
                            –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ
                            <span style="color: #9ca3af; font-size: 12px;">–í—Å—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤–∫–ª—é—á–Ω–æ –∑ Figma</span>
                        </div>
                        <div class="mode-description">–ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–æ—é</div>
                    </div>
                </div>

                <div class="mode-option" data-mode="production" onclick="selectMode('production')">
                    <div class="mode-icon">üì¶</div>
                    <div class="mode-content">
                        <div class="mode-title">
                            –ü—Ä–æ–¥–∞–∫—à–Ω
                            <span style="color: #9ca3af; font-size: 12px;">–ú—ñ–Ω—ñ–º—ñ–∑–æ–≤–∞–Ω–∏–π CSS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É</span>
                        </div>
                        <div class="mode-description">–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –±–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤</div>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-primary" onclick="proceedWithMode()" id="proceedBtn" disabled>
                    –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
                </button>
            </div>
        </div>

        <!-- Canvas —Å–µ–ª–µ–∫—Ç–æ—Ä -->
        <div class="canvas-selector" id="canvasSelector">
            <div class="canvas-header">
                <div class="canvas-title">
                    üé® –í–∏–±–µ—Ä—ñ—Ç—å Canvas
                </div>
                <div class="selected-count" id="selectedCount">
                    <span id="selectedNumber">0</span> Selected
                </div>
            </div>

            <div class="canvas-info">
                –í–∏–±–µ—Ä—ñ—Ç—å Canvas (–ó–Ω–∞–π–¥–µ–Ω–æ: <span id="totalCanvas">5</span>). –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Ctrl/Cmd –¥–ª—è –º–Ω–æ–∂–∏–Ω–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É
            </div>

            <div class="canvas-list" id="canvasList">
                <label class="canvas-item">
                    <div class="canvas-checkbox">
                        <input type="checkbox" value="style-guide" onchange="updateSelectedCount()">
                        <span class="checkmark"></span>
                    </div>
                    <span class="canvas-name">‚úì Style Guide Canvas</span>
                    <span class="canvas-count">‚Ä¢ 1 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
                </label>

                <label class="canvas-item">
                    <div class="canvas-checkbox">
                        <input type="checkbox" value="classwork-1-3" onchange="updateSelectedCount()">
                        <span class="checkmark"></span>
                    </div>
                    <span class="canvas-name">‚úì Classwork #1-2-3 Canvas</span>
                    <span class="canvas-count">‚Ä¢ 2 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
                </label>

                <label class="canvas-item">
                    <div class="canvas-checkbox">
                        <input type="checkbox" value="classwork-4" onchange="updateSelectedCount()">
                        <span class="checkmark"></span>
                    </div>
                    <span class="canvas-name">Classwork #4 Canvas</span>
                    <span class="canvas-count">‚Ä¢ 2 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
                </label>

                <label class="canvas-item">
                    <div class="canvas-checkbox">
                        <input type="checkbox" value="classwork-5" onchange="updateSelectedCount()">
                        <span class="checkmark"></span>
                    </div>
                    <span class="canvas-name">Classwork #5 Canvas</span>
                    <span class="canvas-count">‚Ä¢ 3 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
                </label>

                <label class="canvas-item">
                    <div class="canvas-checkbox">
                        <input type="checkbox" value="classwork-6" onchange="updateSelectedCount()">
                        <span class="checkmark"></span>
                    </div>
                    <span class="canvas-name">Classwork #6 Canvas</span>
                    <span class="canvas-count">‚Ä¢ 10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤</span>
                </label>
            </div>

            <div class="actions">
                <button class="btn btn-secondary" onclick="goBack()">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
                <button class="btn btn-primary" onclick="generateCSS()" id="generateBtn">
                    OK
                </button>
            </div>
        </div>
    </div>

    <script>
        let selectedMode = null;
        let selectedCanvases = [];

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –ø–µ—Ä—à–∏—Ö –¥–≤–æ—Ö canvas –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.onload = function() {
            // –í–∏–±–∏—Ä–∞—î–º–æ –ø–µ—Ä—à—ñ –¥–≤–∞ checkbox
            const checkboxes = document.querySelectorAll('#canvasList input[type="checkbox"]');
            if (checkboxes.length >= 2) {
                checkboxes[0].checked = true;
                checkboxes[1].checked = true;
                updateSelectedCount();
            }
        };

        function selectMode(mode) {
            // –ó–Ω—è—Ç–∏ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –∑ —É—Å—ñ—Ö
            document.querySelectorAll('.mode-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // –í–∏–¥—ñ–ª–∏—Ç–∏ –≤–∏–±—Ä–∞–Ω–∏–π
            const selectedOption = document.querySelector(`[data-mode="${mode}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
                selectedMode = mode;
                document.getElementById('proceedBtn').disabled = false;
            }
        }

        function proceedWithMode() {
            if (!selectedMode) return;
            
            // –Ø–∫—â–æ –æ–±—Ä–∞–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–µ–∂–∏–º - –ø–æ–∫–∞–∑–∞—Ç–∏ canvas selector
            if (selectedMode === 'maximum') {
                document.getElementById('welcomeScreen').style.display = 'none';
                document.getElementById('canvasSelector').classList.add('active');
            } else {
                // –î–ª—è —ñ–Ω—à–∏—Ö —Ä–µ–∂–∏–º—ñ–≤ - –æ–¥—Ä–∞–∑—É –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ CSS
                console.log('Generating CSS with mode:', selectedMode);
                alert(`–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è CSS –≤ —Ä–µ–∂–∏–º—ñ: ${selectedMode}`);
            }
        }

        function updateSelectedCount() {
            const checkboxes = document.querySelectorAll('#canvasList input[type="checkbox"]:checked');
            const count = checkboxes.length;
            document.getElementById('selectedNumber').textContent = count;
            
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∏–±—Ä–∞–Ω—ñ canvas
            selectedCanvases = Array.from(checkboxes).map(cb => cb.value);
            
            // –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É OK —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —â–æ—Å—å –≤–∏–±—Ä–∞–Ω–æ
            document.getElementById('generateBtn').disabled = count === 0;
        }

        function goBack() {
            document.getElementById('canvasSelector').classList.remove('active');
            document.getElementById('welcomeScreen').style.display = 'block';
        }

        function generateCSS() {
            if (selectedCanvases.length === 0) {
                alert('–í–∏–±–µ—Ä—ñ—Ç—å —Ö–æ—á–∞ –± –æ–¥–∏–Ω Canvas');
                return;
            }
            
            console.log('Selected mode:', selectedMode);
            console.log('Selected canvases:', selectedCanvases);
            
            // –¢—É—Ç –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –æ—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
            alert(`–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è CSS\n–†–µ–∂–∏–º: ${selectedMode}\nCanvas: ${selectedCanvases.join(', ')}`);
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–¥—ñ —Ç—É—Ç –±—É–¥–µ –≤–∏–∫–ª–∏–∫:
            // window.postMessage({
            //     command: 'generate',
            //     mode: selectedMode,
            //     canvases: selectedCanvases
            // });
        }

        // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Ctrl/Cmd –¥–ª—è –º–Ω–æ–∂–∏–Ω–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É
        let ctrlPressed = false;
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Control' || e.key === 'Meta') {
                ctrlPressed = true;
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'Control' || e.key === 'Meta') {
                ctrlPressed = false;
            }
        });

        // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏
        document.querySelectorAll('.canvas-item').forEach(item => {
            item.addEventListener('click', function(e) {
                // –Ø–∫—â–æ –∫–ª—ñ–∫ –Ω–µ –Ω–∞ checkbox
                if (e.target.tagName !== 'INPUT') {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    
                    if (!ctrlPressed) {
                        // –ë–µ–∑ Ctrl - –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ —Ü–µ–π
                        document.querySelectorAll('#canvasList input[type="checkbox"]').forEach(cb => {
                            if (cb !== checkbox) cb.checked = false;
                        });
                    }
                    
                    checkbox.checked = !checkbox.checked;
                    updateSelectedCount();
                }
            });
        });
    </script>
</body>
</html>